    <div id="questionWizardModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 overflow-y-auto h-full w-full flex items-center justify-center" style="display: none; z-index: 120;">
        <div class="bg-white p-6 sm:p-8 rounded-lg shadow-xl w-full max-w-lg sm:max-w-xl md:max-w-2xl mx-auto">
            <!-- Modal Header -->
            <div class="flex justify-between items-center mb-6">
                <h2 id="wizardQuestionProgress" class="text-xl sm:text-2xl font-bold text-gray-800">Pregunta X de Y</h2>
                <button id="closeWizardModalBtn" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>

            <!-- Modal Body: Question Display Area -->
            <div id="wizardQuestionArea" class="mb-6">
                <h3 id="wizardQuestionText" class="text-lg sm:text-xl font-semibold text-gray-700 mb-4"></h3>
                <div id="wizardAnswerOptions" class="space-y-3">
                 
                </div>
            </div>

            <!-- Modal Footer: Navigation -->
            <div class="flex justify-between items-center pt-6 border-t border-gray-200">
                <button id="wizardPrevBtn" class="btn btn-secondary">
                    <i class="fas fa-arrow-left mr-2"></i>Anterior
                </button>
                <button id="wizardNextBtn" class="btn btn-primary">
                    Siguiente<i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button id="wizardFinishBtn" class="btn btn-primary bg-green-500 hover:bg-green-600" style="display: none;">
                    <i class="fas fa-check mr-2"></i>Finalizar y Guardar
                </button>
            </div>
        </div>
    </div
<script>
    // Este script debe estar disponible en la página que incluye este parcial.
    // Es mejor moverlo a un archivo .js global en un proyecto real.
    document.addEventListener('DOMContentLoaded', function() {
        // --- Lógica del Asistente de Preguntas (Question Wizard) ---
        let currentQuestionIndex = 0;
        let userWizardAnswers = {}; // Almacena las respuestas como { question_id: { ...answer_data } }

        // Elementos del DOM del Wizard
        const questionWizardModal = document.getElementById('questionWizardModal');
        const wizardQuestionProgress = document.getElementById('wizardQuestionProgress');
        const closeWizardModalBtn = document.getElementById('closeWizardModalBtn');
        const wizardQuestionText = document.getElementById('wizardQuestionText');
        const wizardAnswerOptions = document.getElementById('wizardAnswerOptions');
        const wizardPrevBtn = document.getElementById('wizardPrevBtn');
        const wizardNextBtn = document.getElementById('wizardNextBtn');
        const wizardFinishBtn = document.getElementById('wizardFinishBtn');
        
        // El botón que abre el wizard (debe existir en la página principal)
        const openWizardButton = document.getElementById('participateInPoolBtn'); 

        function openWizard() {
            // Lógica para abrir el wizard (comprobar si la quiniela está cerrada, cargar preguntas si es necesario, etc.)
            // ... (código de la función openWizard de tu archivo original) ...
            if(questionWizardModal) questionWizardModal.style.display = 'flex';
            displayWizardQuestion(0);
        }

        function closeWizard() {
            if(questionWizardModal) questionWizardModal.style.display = 'none';
        }

        function displayWizardQuestion(index) {
            // Lógica para mostrar la pregunta actual en el wizard
            // ... (código de la función displayWizardQuestion de tu archivo original) ...
        }

        function saveCurrentWizardAnswer() {
            // Lógica para guardar la respuesta del paso actual del wizard
            // ... (código de la función saveCurrentWizardAnswer de tu archivo original) ...
        }

        function handleNextWizardQuestion() {
            saveCurrentWizardAnswer();
            if (currentQuestionIndex < allRaceQuestions.length - 1) {
                currentQuestionIndex++;
                displayWizardQuestion(currentQuestionIndex);
            }
        }

        function handlePreviousWizardQuestion() {
            saveCurrentWizardAnswer();
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayWizardQuestion(currentQuestionIndex);
            }
        }

        // Asignación de eventos
        if (openWizardButton) {
            openWizardButton.addEventListener('click', openWizard);
        }
        if (closeWizardModalBtn) {
            closeWizardModalBtn.addEventListener('click', closeWizard);
        }
        if (wizardNextBtn) {
            wizardNextBtn.addEventListener('click', handleNextWizardQuestion);
        }
        if (wizardPrevBtn) {
            wizardPrevBtn.addEventListener('click', handlePreviousWizardQuestion);
        }
        if (wizardFinishBtn) {
            wizardFinishBtn.addEventListener('click', () => {
                saveCurrentWizardAnswer();
                // Lógica para enviar todas las respuestas al servidor
                // ... (código del fetch para guardar respuestas) ...
            });
        }
    });
</script>
