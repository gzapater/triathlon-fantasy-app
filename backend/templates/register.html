<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - TriFantasy</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='img/favicon.svg') }}">
    <style>
        :root {
            --orange-primary: #FF6B35;
            --orange-light: #FF8F65;
            --orange-dark: #FF4500;
            --orange-pale: #FFB380;
            --gray-dark: #2C3E50;
            --gray-medium: #34495E;
            --gray-light: #7F8C8D;
            --blue-water: #3498DB;
            --green-run: #27AE60;
            --red-accent: #E74C3C;
        }
        /* Removed body styles, will be handled by Tailwind classes */
        .brand-font {
            font-family: 'Orbitron', monospace;
        }
        .gradient-orange-text {
            background: linear-gradient(135deg, var(--orange-primary) 0%, var(--orange-dark) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        /* .register-container, .input-field, .select-field, .btn-primary and their focus/hover states are removed as Tailwind classes are now used directly on elements. */
        /* .logo-container and .footer-link styles are also removed as structure and styling are handled by Tailwind. */

        .message-area {
            /* margin-top: 1.25rem; */ /* Adjusted by form structure */
            /* margin-bottom: 1rem; */ /* Adjusted by form structure */
            padding: 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            text-align: center;
        }
        .message-area.error {
            background-color: #FEE2E2;
            color: #B91C1C;
            border: 1px solid #FCA5A5;
        }
        .message-area.success {
            background-color: #D1FAE5;
            color: #047857;
            border: 1px solid #6EE7B7;
        }
        /* Removed label style as Tailwind classes are used directly on label elements */
        .bg-triathlon {
            /* URL de imagen de muestra para demostración */
            /* TODO: Replace with your desired background image URL */
            background-image: url('https://d1le4h54pkkjcy.cloudfront.net/Una_fotografa_cinematogrfica_de_estilo_pico_mos-1750197117920.png');
            background-size: cover;
            background-position: center;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="min-h-screen flex items-center justify-center">
        <div class="w-full lg:grid lg:grid-cols-2 lg:h-screen overflow-hidden">

            <!-- Panel Izquierdo: Formulario de Registro -->
            <div class="bg-white p-8 sm:p-12 flex flex-col justify-center">
                <div class="w-full max-w-md mx-auto">
                    <!-- Logo -->
                    <div class="flex justify-center mb-6">
                        <a href="#">
                           <svg width="120" height="100" viewBox="0 0 120 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g transform="translate(37, 10)">
                                  <path d="M1 29L16 14L1 0" stroke="#F97316" stroke-opacity="0.6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M16 29L31 14L16 0" stroke="#F97316" stroke-opacity="0.8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                  <path d="M31 29L46 14L31 0" stroke="#F97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </g>
                                <text x="60" y="80" font-family="Inter, sans-serif" font-size="24" fill="#6B7280" font-weight="300" text-anchor="middle">Tri<tspan font-weight="700" fill="#1F2937">Fantasy</tspan></text>
                            </svg>
                        </a>
                    </div>

                    <h2 class="text-2xl font-bold text-gray-900 text-center">Crear Cuenta</h2>
                    <p class="text-gray-600 text-center mt-2 mb-8">Regístrate para empezar a competir.</p>

                    <div id="messageArea" class="message-area my-4" style="display: none;"></div>
                    <!-- register.js will make this visible and add content/classes -->

                    <!-- Formulario -->
                    <form id="registerForm" action="#" method="POST" class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">Nombre Completo</label>
                            <div class="mt-1">
                                <input type="text" id="name" name="name" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm" placeholder="Tu nombre completo" required>
                            </div>
                        </div>
                        <div>
                            <label for="username" class="block text-sm font-medium text-gray-700">Nombre de Usuario</label>
                            <div class="mt-1">
                                <input type="text" id="username" name="username" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm" placeholder="Elige un nombre de usuario" required>
                            </div>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Correo Electrónico</label>
                            <div class="mt-1">
                                <input type="email" id="email" name="email" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm" placeholder="tu@email.com" required>
                            </div>
                        </div>
                        <div>
                            <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
                            <div class="mt-1">
                                <input type="password" id="password" name="password" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm" placeholder="Crea una contraseña segura" required>
                            </div>
                        </div>
                        <div>
                            <label for="role" class="block text-sm font-medium text-gray-700">Rol</label>
                            <div class="mt-1">
                                <select id="role" name="role" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm" required>
                                    {% for role_obj in roles %}
                                        <option value="{{ role_obj.code }}">{{ role_obj.description }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500">
                                Registrarse
                            </button>
                        </div>
                    </form>
                </div>
                <div class="mt-8 text-center text-sm text-gray-600">
                    <p>¿Ya tienes una cuenta? <a href="{{ url_for('serve_login_page') }}" class="font-medium text-orange-600 hover:text-orange-500">Inicia sesión aquí</a></p>
                </div>
            </div>

            <!-- Panel Derecho: Imagen -->
            <div class="hidden lg:block relative">
                <div class="absolute inset-0 bg-gray-800 opacity-25"></div> <!-- Overlay sutil -->
                <div class="bg-triathlon h-full w-full"></div>
            </div>

        </div>
    </div>

    <script src="{{ url_for('static', filename='js/register.js') }}"></script>
    <script>
        // Small script to make messageArea visible only when it has content
        const messageArea = document.getElementById('messageArea');
        if (messageArea) { // Check if element exists
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        if (messageArea.textContent.trim() !== '') {
                            messageArea.style.display = 'block';
                        } else {
                            messageArea.style.display = 'none';
                        }
                    }
                });
            });
            observer.observe(messageArea, { childList: true, characterData: true, subtree: true });
        }
    </script>
</body>
</html>
